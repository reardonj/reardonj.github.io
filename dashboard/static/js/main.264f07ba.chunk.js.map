{"version":3,"sources":["features/weather/IconMappings.ts","features/weather/WeatherSlice.ts","model/Hooks.ts","components/AppToasts.ts","components/Header.tsx","features/weather/Components.tsx","App.tsx","serviceWorker.ts","model/Store.ts","index.tsx"],"names":["idToCondition","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","23","24","25","26","27","28","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","conditionForId","id","ParseError","message","Error","getChild","element","child","optional","curr","rest","length","slice","first","getElementsByTagName","tagName","parseAttribute","attribute","text","getAttribute","parseStringElement","textContent","parseNumberElement","number","Number","isNaN","parseDate","dateTime","DateTime","utc","parseForecast","forecast","abbreviated","title","icon","fullReport","conditions","temperature","windChill","humidex","parseCurrentConditions","current","dateElement","Array","from","find","x","time","toSeconds","relativeHumidity","parseHourlyForecastGroup","forecasts","map","dateString","fromFormat","zone","FixedOffsetZone","utcInstance","pop","parsePriority","priority","parseWarnings","warningSection","url","items","description","type","parseWeather","xml","reportTimeNodes","evaluate","undefined","XPathResult","FIRST_ORDERED_NODE_TYPE","singleNodeValue","Element","hourlyForecasts","warnings","fetchWeather","createAsyncThunk","a","axios","response","DOMParser","parseFromString","data","weatherSlice","createSlice","name","initialState","state","reducers","loadWeather","action","isFetching","extraReducers","builder","addCase","pending","fulfilled","payload","error","rejected","actions","useAppDispatch","useDispatch","useAppSelector","useSelector","AppToasts","Toaster","create","className","position","Position","BOTTOM","Header","Group","align","Alignment","LEFT","Heading","RIGHT","LoadingIndicator","LoadingButton","updateRelativeTime","update","fromSeconds","toRelative","dispatcher","forecastTime","useState","relativeUpdateTime","setRelativeUpdateTime","now","toUTC","lastUpdate","setLastUpdate","useEffect","interval","setInterval","diffNow","minutes","clearInterval","indicator","forecastState","show","intent","loading","onClick","CurrentConditionsReport","Classes","TEXT_MUTED","TEXT_SMALL","UI_TEXT","join","toLocal","toLocaleString","TIME_24_SIMPLE","ellipsize","renderTemperature","AstronomicalReport","DailyForecasts","elements","renderForecast","renderTemperatureSpark","HourlyForecasts","cellSpacing","renderHourlyForecast","Warnings","INTENT_PRIMARY","INTENT_DANGER","INTENT_WARNING","window","open","interactive","CALLOUT","warning","temp","modifiedTemp","actual","toFixed","tempDetails","content","ToolTipClasses","TOOLTIP2_INDICATOR","endsWith","date","day","warningClass","to24hTime","style","today","Date","fromJSDate","getSunrise","getSunset","temps","min","Math","range","max","normalized","spacing","path","reduce","val","idx","viewBox","preserveAspectRatio","strokeWidth","stroke","vectorEffect","fill","d","vector-effect","App","mode","useModeSelector","dark","DARK","light","unset","Boolean","location","hostname","match","store","configureStore","reducer","Weather","dispatch","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","console"],"mappings":"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","file":"static/js/main.264f07ba.chunk.js","sourcesContent":["const idToCondition: Record<number, string> = {\n  0: 'wi-day-sunny', // sunny\n  1: 'wi-day-sunny-overcast', // mainly sunny\n  2: 'wi-day-cloudy', // partly cloudy\n  3: 'wi-day-cloudy-high', // mostly cloudy\n  4: 'wi-day-cloudy-high', // increasingly cloudy\n  5: 'wi-day-sunny-overcast', // clearing\n  6: 'wi-day-showers', // light rain shower\n  7: 'wi-day-rain-mix', // light rain shower and flurries\n  8: 'wi-day-snow', // light flurries\n  9: 'wi-day-storm-showers', // thunder showers\n  10: 'wi-cloudy', // cloudy\n  11: 'wi-rain', // precipitation\n  12: 'wi-showers', // rain showers\n  13: 'wi-rain', // rain\n  14: 'wi-sleet', // freezing rain\n  15: 'wi-rain-mix', // snow & rain\n  16: 'wi-snow', // light snow\n  17: 'wi-snow', // snow\n  18: 'wi-snow', // heavy snow\n  19: 'wi-thunderstorm', // thunderstorms\n  23: 'wi-dust', // haze\n  24: 'wi-fog', // fog\n  25: 'wi-snow-wind', // drifting snow\n  26: 'wi-hail', // ice crystals\n  27: 'wi-hail', // hail\n  28: 'wi-sprinkle', // drizzle\n  30: 'wi-night-clear', // clear (night)\n  31: 'wi-night-alt-partly-cloudy', // mostly clear\n  32: 'wi-night-alt-cloudy', // cloudy\n  33: 'wi-night-alt-cloudy-high', // mostly cloudy\n  34: 'wi-night-alt-cloudy-high', // increasingly cloudy\n  35: 'wi-night-alt-partly-cloudy', // clearing\n  36: 'wi-night-alt-showers', // rain showers\n  37: 'wi-night-alt-rain-mix', // rain-snow mix\n  38: 'wi-night-alt-snow', // light flurries\n  39: 'wi-night-alt-thunderstorm', // thunderstorm\n  40: 'wi-night-alt-snow-wind', // blowing snow\n  41: 'wi-tornado', // funnel cloud\n  42: 'wi-tornado', // tornado\n  43: 'wi-strong-wind', // windy\n  44: 'wi-smoke', // smoke\n  45: 'wi-dust', // dust\n  46: 'wi-hail', // thunderstorm with hail\n  47: 'wi-thunderstorm', // thunderstorm with dust\n  48: 'wi-tornado' // waterspout\n}\n\nexport function conditionForId(id: number): string | undefined {\n  if (id in idToCondition) {\n    return 'wi ' + idToCondition[id];\n  }\n\n  return undefined;\n}","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\nimport axios from 'axios';\nimport { DateTime, FixedOffsetZone } from 'luxon';\nimport { conditionForId } from './IconMappings';\n\nexport interface ConditionReport {\n  conditions: string;\n  icon: string | undefined;\n  temperature: number;\n  windChill: number | null;\n  humidex: number | null;\n}\n\nexport interface CurrentConditions extends ConditionReport {\n  relativeHumidity: number | null;\n  time: number;\n}\n\nexport interface HourlyForecast extends ConditionReport {\n  time: number;\n  pop: number;\n}\n\nexport interface Forecast extends ConditionReport {\n  title: string;\n  fullReport: string\n}\n\nexport type WarningPriority = 'urgent' | 'high' | 'medium' | 'low'\nexport interface Warning {\n  type: string;\n  description: string;\n  priority: WarningPriority;\n}\n\nexport interface WeatherReport {\n  time: number;\n  current: CurrentConditions;\n  forecasts: Forecast[];\n  hourlyForecasts: HourlyForecast[];\n  warnings: { url: string, items: Warning[] } | undefined\n}\n\nexport interface WeatherState {\n  state: \"fetching\" | \"fetched\" | { error: string };\n  data: WeatherReport | null;\n}\n\nclass ParseError extends Error {\n  public constructor(message: string) {\n    super(message);\n  }\n}\n\nconst initialState: WeatherState = { state: \"fetched\", data: null };\n\nfunction getChild(element: Element, child: string | string[]): Element;\nfunction getChild(element: Element, child: string | string[], optional?: boolean): Element | null;\nfunction getChild(element: Element, child: string | string[], optional?: boolean) {\n  let curr: string;\n  let rest: string[]\n  if (typeof (child) === 'string') {\n    curr = child;\n    rest = [];\n  } else if (child.length === 0) {\n    return element;\n  } else {\n    curr = child[0];\n    rest = child.slice(1);\n  }\n\n  const first = element.getElementsByTagName(curr)?.[0];\n  if (!first && !optional) {\n    throw new ParseError(`${element.tagName} missing element ${child}`);\n  }\n\n  if (rest.length > 0) {\n    return getChild(first, rest, optional);\n  } else {\n    return first;\n  }\n}\n\nfunction parseAttribute(element: Element, attribute: string) {\n  const text = element.getAttribute(attribute);\n  if (!text) {\n    throw new ParseError(`${element.tagName} missing attribute ${attribute}`);\n  }\n\n  return text;\n}\n\nfunction parseStringElement(element: Element): string;\nfunction parseStringElement(element: Element | null, optional?: boolean): string | null;\nfunction parseStringElement(element: Element | null, optional?: boolean) {\n  const text = element?.textContent;\n  if (!text && !optional) {\n    throw new ParseError('Element or content was missing');\n  }\n\n  return text;\n}\n\nfunction parseNumberElement(element: Element): number;\nfunction parseNumberElement(element: Element | null, optional: boolean): number | null;\nfunction parseNumberElement(element: Element | null, optional?: boolean) {\n  const text = parseStringElement(element, optional);\n  if (!text && optional) {\n    return null;\n  }\n\n  const number = Number(text);\n  if (isNaN(number)) {\n    throw new ParseError(`${element!.tagName} does not contain a number`);\n  }\n\n  return number;\n}\n\nfunction parseDate(dateTime: Element): DateTime {\n  return DateTime.utc(\n    parseNumberElement(getChild(dateTime, 'year')),\n    parseNumberElement(getChild(dateTime, 'month')),\n    parseNumberElement(getChild(dateTime, 'day')),\n    parseNumberElement(getChild(dateTime, 'hour')),\n    parseNumberElement(getChild(dateTime, 'minute')));\n}\n\nfunction parseForecast(forecast: Element) {\n  const abbreviated = getChild(forecast, 'abbreviatedForecast');\n  return {\n    title: parseAttribute(getChild(forecast, 'period'), 'textForecastName'),\n    icon: conditionForId(parseNumberElement(getChild(abbreviated, 'iconCode'))),\n    fullReport: parseStringElement(getChild(forecast, 'textSummary')),\n    conditions: parseStringElement(getChild(abbreviated, 'textSummary')),\n    temperature: parseNumberElement(getChild(forecast, ['temperatures', 'temperature'])),\n    windChill: null,\n    humidex: null\n  }\n}\n\nfunction parseCurrentConditions(current: Element): CurrentConditions {\n  var dateElement = Array.from(current.getElementsByTagName('dateTime')).find(x => x.getAttribute('zone') === 'UTC');\n  if (!dateElement) {\n    throw new ParseError(\"currentConditions missing UTC dateTime\");\n  }\n\n  return {\n    time: parseDate(dateElement).toSeconds(),\n    conditions: parseStringElement(getChild(current, 'condition')),\n    temperature: parseNumberElement(getChild(current, 'temperature')),\n    icon: conditionForId(parseNumberElement(getChild(current, 'iconCode'))),\n    windChill: parseNumberElement(getChild(current, 'windChill', true), true),\n    humidex: parseNumberElement(getChild(current, 'humidex', true), true),\n    relativeHumidity: parseNumberElement(getChild(current, 'relativeHumidity', true), true)\n  };\n}\n\nfunction parseForecastGroup(forecasts: Element): Forecast[] {\n  return Array.from(forecasts.getElementsByTagName('forecast')).map(parseForecast);\n}\n\nfunction parseHourlyForecastGroup(forecasts: Element): HourlyForecast[] {\n  return Array.from(forecasts.getElementsByTagName('hourlyForecast')).map(current => {\n    const dateString = parseAttribute(current, 'dateTimeUTC');\n    const date = DateTime.fromFormat(dateString, 'yyyyMMddHHmm', { zone: FixedOffsetZone.utcInstance });\n    return {\n      time: date.toSeconds(),\n      conditions: parseStringElement(getChild(current, 'condition')),\n      temperature: parseNumberElement(getChild(current, 'temperature')),\n      icon: conditionForId(parseNumberElement(getChild(current, 'iconCode'))),\n      windChill: parseNumberElement(getChild(current, 'windChill', true), true),\n      humidex: parseNumberElement(getChild(current, 'humidex', true), true),\n      pop: (parseNumberElement(getChild(current, 'lop', true), true) || 0) / 100\n    };\n  });\n}\n\nfunction parsePriority(priority: string): WarningPriority {\n  switch (priority) {\n    case 'low':\n      return 'low'\n    case 'medium':\n      return 'medium'\n    case 'high':\n      return 'high'\n    case 'urgent':\n      return 'urgent'\n    default:\n      return 'medium'\n  }\n}\n\nfunction parseWarnings(warningSection: Element) {\n  const url = warningSection.getAttribute(\"url\");\n  if (url === null) {\n    return undefined;\n  }\n\n  return {\n    url: url ?? \"\",\n    items: Array.from(warningSection.getElementsByTagName('event')).map(x => {\n      return {\n        description: parseAttribute(x, 'description'),\n        type: parseAttribute(x, 'type'),\n        priority: parsePriority(parseAttribute(x, 'priority'))\n      }\n    })\n  }\n}\n\nfunction parseWeather(xml: Document): WeatherReport {\n  const reportTimeNodes = xml.evaluate(\n    \"/siteData/dateTime[@name='xmlCreation' and @zone='UTC']\",\n    xml,\n    undefined,\n    XPathResult.FIRST_ORDERED_NODE_TYPE);\n  if (!(reportTimeNodes.singleNodeValue instanceof Element)) {\n    throw new ParseError(\"Missing creation time\");\n  }\n  return {\n    time: parseDate(reportTimeNodes.singleNodeValue).toSeconds(),\n    current: parseCurrentConditions(xml.getElementsByTagName('currentConditions')[0]),\n    forecasts: parseForecastGroup(xml.getElementsByTagName('forecastGroup')[0]),\n    hourlyForecasts: parseHourlyForecastGroup(xml.getElementsByTagName('hourlyForecastGroup')[0]),\n    warnings: parseWarnings(xml.getElementsByTagName('warnings')[0])\n  }\n}\n\n// Thunk functions\nexport const fetchWeather = createAsyncThunk('weather/fetchWeather', async () => {\n  const response = await axios(\n    process.env.NODE_ENV === 'production'\n      ? 'https://dashboard-proxy.jmreardon.com/api/weather/citypage_weather/xml/ON/s0000430_e.xml'\n      : '/api/weather/citypage_weather/xml/ON/s0000430_e.xml');\n  const xml = new DOMParser().parseFromString(response.data, \"text/xml\");\n  try {\n    return parseWeather(xml);\n  }\n  catch (e) {\n    if (e instanceof ParseError) {\n      return e.message;\n    }\n\n    throw (e);\n  }\n});\n\nconst weatherSlice = createSlice({\n  name: 'weather',\n  initialState,\n  reducers: {\n    loadWeather(state, action) {\n      return {\n        ...state,\n        isFetching: true\n      }\n    }\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchWeather.pending, (state, action) => {\n        state.state = \"fetching\";\n      })\n      .addCase(fetchWeather.fulfilled, (state, action) => {\n        state.state = \"fetched\";\n\n        if (typeof (action.payload) === \"string\") {\n          state.state = { error: action.payload };\n        } else {\n          state.state = \"fetched\";\n          state.data = action.payload;\n        }\n      })\n      .addCase(fetchWeather.rejected, (state, action) => {\n        state.state = { error: action.error.message || \"Unexpected error\" };\n      })\n  }\n})\n\nexport const { loadWeather } = weatherSlice.actions\n\nexport default weatherSlice","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux'\nimport type { RootState, AppDispatch } from './Store'\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>()\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector","import { Position, Toaster } from \"@blueprintjs/core\";\n\nexport const AppToasts = Toaster.create({\n  className: \"toaster\",\n  position: Position.BOTTOM,\n});","import { Alignment, Button, Icon, Navbar } from \"@blueprintjs/core\";\nimport { DateTime } from \"luxon\";\nimport React, { useEffect, useState } from \"react\";\nimport { fetchWeather } from \"../features/weather/WeatherSlice\";\nimport { useAppDispatch, useAppSelector } from \"../model/Hooks\";\nimport { AppToasts } from \"./AppToasts\";\n\nexport function Header() {\n  return (\n    <Navbar>\n      <Navbar.Group align={Alignment.LEFT}>\n        <Navbar.Heading>JR's Dashboard</Navbar.Heading>\n      </Navbar.Group>\n      <Navbar.Group align={Alignment.RIGHT}>\n        <LoadingIndicator />\n        <LoadingButton />\n      </Navbar.Group>\n    </Navbar>\n  )\n}\n\nfunction updateRelativeTime(update: (a: string) => void, time: number | undefined) {\n  return update(time ? 'As of ' + DateTime.fromSeconds(time).toRelative() : '');\n}\n\nfunction LoadingIndicator() {\n  const dispatcher = useAppDispatch();\n  const forecastTime = useAppSelector(state => state.forecast.data?.time);\n  const [relativeUpdateTime, setRelativeUpdateTime] = useState('');\n  const [lastUpdate, setLastUpdate] = useState(DateTime.now().toUTC());\n\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      updateRelativeTime(setRelativeUpdateTime, forecastTime);\n\n      if (lastUpdate.diffNow('minutes').minutes < -15) {\n        setLastUpdate(DateTime.now().toUTC());\n        dispatcher(fetchWeather());\n      }\n\n    }, 1000);\n    return () => clearInterval(interval);\n  });\n\n  useEffect(() => {\n    updateRelativeTime(setRelativeUpdateTime, forecastTime);\n  }, [setRelativeUpdateTime, forecastTime])\n\n  return <div>{relativeUpdateTime}</div>\n}\n\n\nfunction LoadingButton() {\n  const dispatcher = useAppDispatch();\n  const forecastState = useAppSelector(state => state.forecast.state);\n\n  useEffect(() => {\n    if (typeof (forecastState) === 'object') {\n      const message = <div>\n        <b>Failed to Load Forecast</b><br />\n        {forecastState.error}\n      </div >\n      AppToasts.show({ message, icon: 'error', intent: 'warning', })\n    }\n  }, [forecastState])\n\n  let indicator;\n  if (typeof (forecastState) === 'string') {\n    indicator = <Icon icon='refresh' />;\n  } else {\n    indicator = <Icon icon='outdated' />;\n  }\n  return <Button\n    loading={forecastState === 'fetching'}\n    onClick={() => dispatcher(fetchWeather())}\n    intent={typeof (forecastState) === 'string' ? 'success' : 'warning'}\n  >\n    {indicator}\n  </Button>\n}","import { Card, Classes, H5, H6, Text } from \"@blueprintjs/core\";\nimport { Tooltip2, Classes as ToolTipClasses } from \"@blueprintjs/popover2\";\nimport { DateTime, FixedOffsetZone } from \"luxon\";\nimport React from \"react\";\nimport { getSunrise, getSunset } from \"sunrise-sunset-js\";\nimport { useAppSelector } from \"../../model/Hooks\";\nimport { ConditionReport, Forecast, HourlyForecast } from \"./WeatherSlice\";\n\nexport function CurrentConditionsReport() {\n  const conditions = useAppSelector(state => state.forecast.data?.current);\n\n  return (\n    <Card>\n      <div className=\"report-line\">\n        <div>\n          <H5>Current Weather\n          <span className={[Classes.TEXT_MUTED, Classes.TEXT_SMALL, Classes.UI_TEXT].join(' ')}>\n              {conditions\n                ? <> as of {DateTime.fromSeconds(conditions.time).toLocal().toLocaleString(DateTime.TIME_24_SIMPLE)}</>\n                : <> unavailable</>}\n            </span>\n          </H5>\n          <div className='overflow-container'><Text ellipsize={true}>{conditions?.conditions}</Text></div>\n          {\n            conditions?.relativeHumidity\n              ? <div className='overflow-container'><Text ellipsize={true}>{conditions?.relativeHumidity}% Relative Humidity</Text></div>\n              : <></>\n          }\n        </div>\n        {conditions\n          ? <>\n            <div className='spacer' />\n            {renderTemperature(conditions.temperature, conditions.humidex, conditions.windChill)}\n            <div className='weather-icon'><i className={'wi-fw ' + (conditions.icon || 'wi wi-na')} /></div>\n          </>\n          : <></>\n        }\n      </div>\n      <AstronomicalReport />\n    </Card>\n  )\n}\n\nexport function DailyForecasts() {\n  const forecasts = useAppSelector(state => state.forecast.data?.forecasts);\n  const elements = forecasts?.map(renderForecast) ?? <div className={Classes.TEXT_MUTED}>unavailable</div>;\n  return <Card>\n    <H5>Forecast</H5>\n    {forecasts ? renderTemperatureSpark(forecasts) : <></>}\n    {elements}\n  </Card>\n}\n\nexport function HourlyForecasts() {\n  const forecasts = useAppSelector(state => state.forecast.data?.hourlyForecasts);\n  return <Card>\n    <H5>Hourly Forecast</H5>\n    {forecasts ? renderTemperatureSpark(forecasts) : <></>}\n    <div className='hourly-forecasts'>\n      {forecasts\n        ? <table cellSpacing={0}>\n          <tbody>\n            {forecasts.map(renderHourlyForecast)}\n          </tbody>\n        </table>\n        : <div className={Classes.TEXT_MUTED}>unavailable</div>\n      }\n    </div>\n  </Card>\n}\n\nexport function Warnings() {\n  const warnings = useAppSelector(state => state.forecast.data?.warnings);\n  if (warnings === undefined) {\n    return <></>\n  }\n\n  let intent = Classes.INTENT_PRIMARY;\n  if (warnings.items.find(x => x.priority === \"high\" || x.priority === \"urgent\")) {\n    intent = Classes.INTENT_DANGER\n  } else if (warnings.items.find(x => x.priority === \"medium\")) {\n    intent = Classes.INTENT_WARNING\n  }\n  return <Card\n    onClick={() => window.open(warnings.url)}\n    interactive={true}\n    className={[Classes.CALLOUT, intent].join(' ')}> {\n      warnings?.items.map(warning => {\n        const title = warning.type.length > 0 ? warning.type : 'Warning';\n        return <>\n          <H5>{title}</H5>\n          <Text>{warning.description.length > 55 ? warning.description.slice(0, 53) + '…' : warning.description}</Text>\n        </>\n      })}\n  </Card>\n}\n\nfunction renderTemperature(temp: number, humidex: number | null, windChill: number | null) {\n  const modifiedTemp = humidex || windChill;\n  const actual = `${temp.toFixed(0)}\\u00b0C`\n  if (modifiedTemp) {\n    let tempDetails = <>\n      Actual: {actual}<br />\n      {humidex && `Humidex: ${humidex.toFixed(0)}\\u00b0C`}\n      {windChill && `Windchill: ${windChill.toFixed(0)}\\u00b0C`}\n    </>\n\n    return <Tooltip2 content={tempDetails} position='top' className={ToolTipClasses.TOOLTIP2_INDICATOR}>\n      {`${modifiedTemp.toFixed(0)}\\u00b0C`}\n    </Tooltip2>\n  }\n  return `${temp.toFixed(0)}\\u00b0C`\n\n}\n\nfunction renderForecast(forecast: Forecast) {\n  return <div\n    className={['report-line', 'forecast', forecast.title.endsWith('night') ? 'night' : 'day'].join(' ')}\n    key={forecast.title}>\n    <div>\n      <H6>{forecast.title}</H6>\n      <Tooltip2 content={forecast.fullReport} position='top' className={ToolTipClasses.TOOLTIP2_INDICATOR}>\n        {forecast.conditions.length > 35 ? forecast.conditions.slice(0, 33) + '…' : forecast.conditions}\n      </Tooltip2>\n    </div>\n    <div className='spacer' />\n    <div className='temperature'>\n      {renderTemperature(forecast.temperature, forecast.humidex, forecast.windChill)}\n    </div>\n    <div className='weather-icon'><i className={'wi-fw ' + (forecast.icon || 'wi wi-na')} /></div>\n  </div>\n}\n\n\nfunction renderHourlyForecast(forecast: HourlyForecast) {\n  const time = DateTime.fromSeconds(forecast.time, { zone: FixedOffsetZone.utcInstance }).toLocal();\n  const date = time.day === DateTime.now().day ? 'today' : 'tomorrow';\n  return <tr className={['report-line', 'forecast', 'hourly', date].join(' ')} key={forecast.time}>\n    <td className='time-title'>\n      <H6 className={warningClass(forecast)}>{to24hTime(time)}</H6>\n    </td>\n    <td className='temperature'>\n      {renderTemperature(forecast.temperature, forecast.humidex, forecast.windChill)}\n    </td>\n    <td><i className={'wi-fw ' + (forecast.icon || 'wi wi-na')} /></td>\n    <td>{forecast.pop > 0 ? forecast.pop.toLocaleString(undefined, { style: 'percent' }) : ''}</td>\n    <td>\n      {forecast.conditions.length > 20 ?\n        <Tooltip2 content={forecast.conditions} position='top' className={ToolTipClasses.TOOLTIP2_INDICATOR}>\n          {forecast.conditions.slice(0, 18) + '…'}\n        </Tooltip2> :\n        forecast.conditions}\n    </td>\n  </tr >\n}\n\nfunction AstronomicalReport() {\n  const today = new Date();\n  return <div className='report-line'>\n    <H5>Sunrise/Sunset</H5>\n    <div className='spacer' />\n    <div>\n      <i className={'wi wi-sunrise'} /> {to24hTime(DateTime.fromJSDate(getSunrise(45.33, -75.58, today)))}\n    </div>\n    <div>\n      <i className={'wi wi-sunset'} /> {to24hTime(DateTime.fromJSDate(getSunset(45.33, -75.58, today)))}\n    </div>\n  </div>\n}\n\nfunction to24hTime(time: DateTime) {\n  return time.toLocal().toLocaleString(DateTime.TIME_24_SIMPLE);\n}\n\nfunction warningClass(forecast: HourlyForecast) {\n  if (forecast.pop >= 0.5) {\n    return 'warning'\n  }\n\n  return ''\n}\nfunction renderTemperatureSpark(forecasts: ConditionReport[]) {\n  const temps = forecasts.map(x => x.humidex || x.windChill || x.temperature);\n  const min = Math.min(...temps);\n  const max = Math.max(...temps);\n  const range = max - min;\n  const normalized = temps.map(x => (1 - (x - min) / range));\n\n  const spacing = 1 / (normalized.length - 1);\n  const path = normalized.reduce((text, val, idx) =>\n    idx === 0\n      ? `M 0 ${val} `\n      //   : text + `L ${idx * spacing} ${val}`, '')\n      : text + `C ${(idx - 0.5) * spacing} ${normalized[idx - 1]}, ${(idx - 0.5) * spacing} ${val}, ${idx * spacing} ${val}\\n `, \"\")\n  return <svg className=\"temperature-spark\" viewBox=\"0 -0.1 1 1.2\" preserveAspectRatio=\"none\">\n    <path strokeWidth='1px'\n      stroke=\"#f99\"\n      vectorEffect=\"non-scaling-stroke\"\n      fill=\"transparent\"\n      d={`M 0 ${(1 - (30 - min) / range)} h 1`} />\n    <path strokeWidth='1px'\n      stroke=\"#999\"\n      vectorEffect=\"non-scaling-stroke\"\n      fill=\"transparent\"\n      d={`M 0 ${(1 - (0 - min) / range)} h 1`} />\n    <path strokeWidth='1px'\n      stroke=\"#99f\"\n      vector-effect=\"non-scaling-stroke\"\n      fill=\"transparent\"\n      d={`M 0 ${(1 - (-20 - min) / range)} h 1`} />\n    <path\n      strokeWidth='1px'\n      stroke=\"#999\"\n      vectorEffect=\"non-scaling-stroke\"\n      fill=\"transparent\"\n      d={path} />\n  </svg>\n}\n\n","import { Classes, Divider } from \"@blueprintjs/core\"\nimport * as React from \"react\"\nimport { useModeSelector } from \"use-light-switch\"\nimport { Header } from \"./components/Header\";\nimport { CurrentConditionsReport, DailyForecasts, HourlyForecasts, Warnings } from \"./features/weather/Components\";\n\nimport './App.scss';\n\nexport const App = () => {\n  const mode = useModeSelector({ dark: Classes.DARK, light: \"\", unset: \"\" });\n  return (\n    <div className={mode} id=\"layout-root\">\n      < Header />\n      <div>\n        <div className='card-grid'>\n          <CurrentConditionsReport />\n          <Warnings />\n          <HourlyForecasts />\n          <DailyForecasts />\n        </div>\n      </div>\n      <Divider />\n      <footer className={Classes.TEXT_MUTED}>\n        Contains information licenced under the Data Server End-use Licence of Environment and Climate Change Canada.\n      </footer>\n    </div >\n  )\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n)\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void\n  onUpdate?: (registration: ServiceWorkerRegistration) => void\n}\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://cra.link/PWA\",\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://cra.link/PWA.\",\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It is the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\")\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\")\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\",\n      )\n    })\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister()\n      })\n      .catch((error) => {\n        console.error(error.message)\n      })\n  }\n}\n","import { configureStore } from '@reduxjs/toolkit'\nimport Weather from '../features/weather/WeatherSlice'\n\nexport const store = configureStore({\n  reducer: {\n    forecast: Weather.reducer\n  }\n})\n\n// Infer the `RootState` and `AppDispatch` types from the store itself\nexport type RootState = ReturnType<typeof store.getState>\n// Inferred type: {posts: PostsState, comments: CommentsState, users: UsersState}\nexport type AppDispatch = typeof store.dispatch","import * as React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { App } from \"./App\"\nimport * as serviceWorker from \"./serviceWorker\"\n\nimport { store } from './model/Store'\nimport { Provider } from \"react-redux\"\nimport { fetchWeather } from \"./features/weather/WeatherSlice\"\n\nimport \"normalize.css/normalize.css\";\nimport \"@blueprintjs/icons/lib/css/blueprint-icons.css\";\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"@blueprintjs/popover2/lib/css/blueprint-popover2.css\";\n\n\nstore.dispatch(fetchWeather())\nsetInterval(() => store.dispatch(fetchWeather()), 1000 * 60 * 60)\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\"),\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}